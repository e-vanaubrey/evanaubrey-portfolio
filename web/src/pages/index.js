import React from 'react'
import { graphql } from 'gatsby'
import Carousel from 'react-multi-carousel';
import 'react-multi-carousel/lib/styles.css';
import {
  mapEdgesToNodes,
  filterOutDocsWithoutSlugs,
  filterOutDocsPublishedInTheFuture
} from '../lib/helpers'
import Container from '../components/container'
import GraphQLErrorList from '../components/graphql-error-list'
import ProjectPreviewGrid from '../components/project-preview-grid'
import SEO from '../components/seo'
import Layout from '../containers/layout'

import '../styles/card.scss'

export const query = graphql`
  query IndexPageQuery {
    site: sanitySiteSettings(_id: {regex: "/(drafts.|)siteSettings/"}) {
      title
      description
      keywords
    }
    projects: allSanitySampleProject(
      limit: 6
      sort: {fields: [publishedAt], order: DESC}
      filter: {slug: {current: {ne: null}}, publishedAt: {ne: null}}
    ) {
      edges {
        node {
          id
          mainImage {
            crop {
              _key
              _type
              top
              bottom
              left
              right
            }
            hotspot {
              _key
              _type
              x
              y
              height
              width
            }
            asset {
              _id
            }
            alt
          }
          title
          _rawExcerpt
          slug {
            current
          }
        }
      }
    }
  }
`

const IndexPage = props => {
  const { data, errors } = props

  if (errors) {
    return (
      <Layout>
        <GraphQLErrorList errors={errors} />
      </Layout>
    )
  }

  const site = (data || {}).site
  const projectNodes = (data || {}).projects
    ? mapEdgesToNodes(data.projects)
      .filter(filterOutDocsWithoutSlugs)
      .filter(filterOutDocsPublishedInTheFuture)
    : []

  if (!site) {
    throw new Error(
      'Missing "Site settings". Open the studio at http://localhost:3333 and add some content to "Site settings" and restart the development server.'
    )
  }

  const responsive = {
    superLargeDesktop: {
      // the naming can be any, depends on you.
      breakpoint: { max: 4000, min: 3000 },
      items: 5
    },
    desktop: {
      breakpoint: { max: 3000, min: 1024 },
      items: 3
    },
    tablet: {
      breakpoint: { max: 1024, min: 464 },
      items: 2
    },
    mobile: {
      breakpoint: { max: 464, min: 0 },
      items: 1,
      partialVisibilityGutter: 80
    }
  };

  return (
    <Layout>
      <SEO title={site.title} description={site.description} keywords={site.keywords} />
      <Carousel
          responsive={responsive}
          partialVisible
          containerClass="carouselContainer">
          <div className='carouselCard'>
            <div className='titleBlock'>
            <svg xmlns="http://www.w3.org/2000/svg" height="42" viewBox="0 -26 779.9948 156"><path fill="white" d="M73.9 103.5H46.2V64H28.3v39.4H0V1.7h28.3v38h17.9v-38h27.7zm126.8.4c28.3 0 51.4-23.6 51.4-52.2C252.1 22.5 229 0 200.7 0 172 0 157.5 20.9 154 29.3c0-12.6-12.6-27.7-27.2-27.7H79.6v101.8h44c17.9 0 30.5-15.3 30.5-28.7 3.9 8.4 17.9 29.2 46.6 29.2zM120 62.6c4.1 0 7.4 4 7.4 8.5 0 4.8-3.3 8.7-7.4 8.7h-14V62.6zm0-38.2c4.1 0 7.4 4 7.4 8.5s-3.3 8.5-7.4 8.5h-14v-17zm18.6 27.3c3.3-.2 8.6-4 10.7-6.2-.8 2.7-.8 11.3 0 14-2.3-3.3-7.4-7.3-10.7-7.8zm36.3 0c0-14.3 11.6-25.9 26-25.8 14.4.1 25.9 11.8 25.7 26.2-.2 14.2-11.7 25.6-25.8 25.6-14.4-.1-25.9-11.6-25.9-26zm25.8 20.4c11 0 20.3-9.1 20.3-20.4 0-11.3-9.3-20.3-20.3-20.3-11.3 0-20.4 9-20.4 20.3s9.1 20.4 20.4 20.4zm199.2-34.4C399.4 13.1 382 0 360.6 0c-11.8 0-22.3 3.9-29.5 11.6C323.8 3.9 313.3 0 301.5 0c-21.4 0-38.8 13.1-39.4 37.8v56.4c0 5.2 4.2 9.4 9.4 9.4h8.8c.9 0 1.6-.7 1.6-1.6V38c.4-12.2 9-18.6 19.6-18.6 10.6 0 19.3 6.4 19.6 18.6v56.2c0 5.2 4.2 9.4 9.4 9.4h8.8c.9 0 1.6-.7 1.6-1.6V38c.4-12.2 9-18.6 19.6-18.6 10.6 0 19.3 6.4 19.6 18.6v56.2c0 5.2 4.2 9.4 9.4 9.4h8.8c.9 0 1.6-.7 1.6-1.6V38c.1-.1 0-.2 0-.3zm198.9-36h-15c-4.1 0-8 2.1-10.3 5.5l-16.6 24.6c-2.2 3.2-6.9 3.2-9 0L531.3 7.2c-2.3-3.4-6.2-5.5-10.3-5.5h-15c-.9 0-1.5 1-1 1.8l29.6 43.9c2.1 3.2 2.1 7.3 0 10.5L505 101.7c-.5.8 0 1.8 1 1.8h15c4.1 0 8-2.1 10.3-5.5l16.6-24.6c2.2-3.2 6.9-3.2 9 0L573.5 98c2.3 3.4 6.2 5.5 10.3 5.5h15c.9 0 1.5-1 1-1.8l-29.6-43.9c-2.1-3.2-2.1-7.3 0-10.5l29.6-43.9c.5-.7 0-1.7-1-1.7zm-100.6 0h-8.8c-4.5 0-8.2 3.2-9.1 7.4-7.9-6-17.7-9-28.4-9C425.9 0 405 18 405 52s21 52 46.8 52c10.6 0 20.4-3 28.2-8.9.4 4.8 4.4 8.5 9.3 8.5h8.8c.9 0 1.6-.7 1.6-1.6V3.2c0-.8-.7-1.5-1.5-1.5zm-46.4 82.9c-15.4 0-28-11.3-28-32.6s12.5-32.6 28-32.6 28 11.3 28 32.6-12.5 32.6-28 32.6z"/></svg>
              <div className='title'>Product Designer</div>
              <div className='subtitle'>Design Systems</div>
              <div className='timeline'>Apr 2020 - Today</div>
            </div>
          </div>
          <div className='carouselCard'>
            <div className='titleBlock'>
              <svg width="233" height="36" viewBox="0 0 233 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.839 9.08633C16.0625 9.08633 20.84 11.1077 20.8905 17.2691H14.632C14.5833 15.3971 12.9577 14.4593 10.6927 14.4593C8.27782 14.4593 7.1941 15.1505 7.1941 16.5293C7.1941 17.4653 7.73596 18.0593 9.70472 18.7487L15.1269 20.5253C18.8694 21.8051 21.4812 23.4827 21.4812 27.6713C21.4812 33.7877 16.1113 35.9567 10.7902 35.9567C4.97609 35.9567 0 33.8867 0 27.2789H6.25849C6.40479 29.6459 8.03218 30.6323 10.7415 30.6323C13.8933 30.6323 15.0764 29.9411 15.0764 28.2653C15.0764 26.9333 14.0902 26.5895 11.184 25.6013L7.04599 24.2693C4.04047 23.3351 0.592434 21.7583 0.592434 17.0747C0.689969 11.2049 5.81236 9.08633 10.8372 9.08633H10.839ZM30.2376 10.3193L30.1889 24.2513C30.1889 28.2599 31.8578 29.6909 34.7188 29.6909C38.1289 29.6909 39.3571 27.0161 39.4366 23.7365L39.4402 23.3945V10.3193H45.6391V28.5407C45.6391 29.1617 46.0979 29.7611 46.6975 29.8547L46.8637 29.8691H47.6331V34.9991L42.7058 34.9901C42.3481 34.9894 41.9941 34.9185 41.6639 34.7814C41.3337 34.6444 41.0339 34.4438 40.7814 34.1913C40.529 33.9387 40.329 33.6391 40.1928 33.3095C40.0565 32.9799 39.9868 32.6268 39.9875 32.2703C39.0338 34.3673 36.0554 35.6579 33.0968 35.6579C27.4254 35.6579 24.2031 32.0291 24.0442 26.0099L24.0387 25.5419V10.3193H30.2376ZM56.6244 0.775726V12.6107C58.2464 10.6541 60.5348 9.65333 63.2532 9.65333C69.2624 9.65333 73.6479 14.6609 73.6479 22.5359C73.6479 30.5999 68.8307 35.6579 63.2062 35.6579C60.2495 35.6579 57.961 34.5113 56.339 32.3639V34.9901H50.4291V0.773926H56.6262L56.6244 0.775726ZM85.8307 9.65333C90.8845 9.65333 95.5119 11.6099 95.5571 17.5715H89.5027C89.4557 15.7607 87.8825 14.8535 85.688 14.8535C83.3508 14.8535 82.3032 15.5213 82.3032 16.8569C82.3032 17.7641 82.827 18.3365 84.7343 19.0043L89.9777 20.7215C93.6028 21.9635 96.1279 23.5853 96.1279 27.6425C96.1279 33.5573 90.9332 35.6579 85.7837 35.6579C80.1556 35.6579 75.3403 33.6527 75.3403 27.2591H81.3965C81.541 29.5487 83.1124 30.5045 85.735 30.5045C88.7875 30.5045 89.9326 29.8349 89.9326 28.2131C89.9326 26.9243 88.9771 26.5895 86.1648 25.6373L82.1587 24.3485C79.2507 23.4413 75.9128 21.9149 75.9128 17.3825C76.0086 11.7035 80.9666 9.65333 85.8325 9.65333H85.8307ZM126.687 9.65333C132.219 9.65333 136.843 11.5595 136.843 19.0511V28.4039C136.843 29.4065 137.322 29.9303 138.274 29.9303H138.846V34.9883H134.129C132.223 34.9883 131.078 33.9875 131.078 31.9823V31.7447C129.409 34.5113 126.644 35.6579 123.306 35.6579C119.014 35.6579 115.485 33.0821 115.485 28.4039C115.485 23.7743 118.727 21.3911 123.925 20.4353L128.025 19.6253C130.03 19.2905 130.601 18.9089 130.601 17.5247C130.601 16.1405 129.458 15.0443 126.548 15.0443C123.83 15.0443 122.399 15.9497 122.399 17.7155H116.343C116.343 12.3245 121.064 9.65153 126.691 9.65153L126.687 9.65333ZM206.908 9.65333C212.438 9.65333 217.064 11.5595 217.064 19.0511V28.4039C217.064 29.4065 217.541 29.9303 218.494 29.9303H219.067V34.9883H214.346C212.438 34.9883 211.293 33.9875 211.293 31.9823V31.7447C209.624 34.5113 206.859 35.6579 203.521 35.6579C199.231 35.6579 195.702 33.0821 195.702 28.4039C195.702 23.7743 198.946 21.3911 204.141 20.4353L208.242 19.6253C210.247 19.2905 210.818 18.9089 210.818 17.5247C210.818 16.1405 209.673 15.0443 206.765 15.0443C204.047 15.0443 202.616 15.9497 202.616 17.7155H196.56C196.56 12.3245 201.281 9.65153 206.909 9.65153L206.908 9.65333ZM107.547 2.35973V9.87293H113.458V15.6419H107.547V27.1799C107.547 29.0033 108.089 29.6927 110.207 29.6927H113.458V35.3645H109.075C104.59 35.3645 101.142 34.4285 101.142 28.6091V15.6419H96.6083V9.87473H101.142V4.18133L107.547 2.36153V2.35973ZM176.423 2.35973V9.87293H182.334V15.6419H176.423V27.1799C176.423 29.0033 176.964 29.6927 179.083 29.6927H182.334V35.3645H177.949C173.464 35.3645 170.018 34.4285 170.018 28.6091V15.6419H165.484V9.87473H170.018V4.18133L176.423 2.36153V2.35973ZM192.366 10.3175V34.9919H186.167V10.3193H192.366V10.3175ZM228.183 0.773926V28.0205C228.183 29.4065 228.757 29.8349 229.948 29.8349H232.447V34.9883H227.896C224.37 34.9883 222.031 33.7949 222.031 29.5001V0.775726H228.183V0.773926ZM154.866 9.65153C160.443 9.65153 164.019 13.3253 164.019 19.7189V34.9901H157.82L157.867 21.1985C157.867 17.7623 156.105 15.6653 153.244 15.6653C150.047 15.6653 148.284 18.2411 148.284 21.7727V34.9901H142.085V10.3193H147.998V13.0391C149.284 10.8431 152.194 9.65153 154.866 9.65153ZM130.646 23.5367C130.312 23.7743 129.694 23.9687 129.169 24.0623L125.592 24.8273C123.255 25.3493 121.873 26.1629 121.873 27.9755C121.873 29.7395 122.97 30.6953 124.973 30.6953C128.311 30.6953 130.646 27.8801 130.646 24.6833V23.5367ZM210.867 23.5367C210.533 23.7743 209.913 23.9687 209.388 24.0623L205.811 24.8273C203.476 25.3493 202.092 26.1629 202.092 27.9755C202.092 29.7395 203.19 30.6953 205.192 30.6953C208.531 30.6953 210.867 27.8801 210.867 24.6833V23.5367ZM62.0177 15.4259C58.5336 15.4259 56.4835 18.3851 56.4835 22.6313C56.4835 26.9729 58.5823 29.9321 62.0159 29.9321C65.352 29.9321 67.4526 27.1169 67.4526 22.6313C67.4526 18.2879 65.352 15.4259 62.0159 15.4259H62.0177Z" fill="white" />
                <path fill-rule="evenodd" clip-rule="evenodd" d="M196.623 0C196.623 4.0572 193.336 7.344 189.284 7.344C187.334 7.34018 185.464 6.56436 184.087 5.18714C182.711 3.80992 181.939 1.9441 181.942 0" fill="white" />
              </svg>
              <div className='title'>Lead Designer</div>
              <div className='subtitle'>Contract</div>
              <div className='timeline'>Feb 2020 - Apr 2020</div>
            </div>
          </div>
          <div className='carouselCard'>
            <div className='titleBlock'>
              <svg width="205" height="42" viewBox="0 0 205 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0)">
                  <path d="M72.361 24.1905L71.1391 27.5114H71.0373C70.8337 26.7626 70.4603 25.623 69.8494 24.2556L63.2989 8.46488H56.8842V33.6323H61.1267V18.1021C61.1267 17.1253 61.1267 16.0184 61.0928 14.6509C61.0588 13.9672 60.9909 13.4463 60.957 13.0556H61.0588C61.2625 14.0323 61.5 14.7486 61.6697 15.2044L69.5439 33.5672H72.5307L80.337 15.0416C80.5067 14.6184 80.6764 13.7719 80.8461 13.0556H80.9479C80.8461 14.9114 80.7782 16.5719 80.7443 17.5812V33.5346H85.2583V8.39976H79.0812L72.361 24.1905ZM89.5348 15.4974H93.9471V33.5346H89.5348V15.4974ZM91.7749 7.87883C91.0282 7.87883 90.4173 8.13929 89.9082 8.59511C89.3991 9.05092 89.1275 9.63697 89.1275 10.3532C89.1275 11.037 89.3991 11.623 89.9082 12.0788C90.4173 12.5346 91.0282 12.7626 91.7749 12.7626C92.5216 12.7626 93.1664 12.5021 93.6416 12.0788C94.1507 11.623 94.4222 11.037 94.4222 10.3532C94.4222 9.66953 94.1507 9.08348 93.6416 8.59511C93.2004 8.13929 92.5555 7.87883 91.7749 7.87883ZM109.594 15.3346C108.779 15.1719 107.931 15.0742 107.116 15.0742C105.113 15.0742 103.281 15.4974 101.753 16.3439C100.226 17.1905 99.0042 18.3626 98.2236 19.8277C97.409 21.3253 97.0017 23.0509 97.0017 25.037C97.0017 26.7626 97.409 28.2928 98.1896 29.6928C98.9703 31.0602 100.056 32.1672 101.516 32.916C102.907 33.6649 104.536 34.0556 106.369 34.0556C108.474 34.0556 110.272 33.6323 111.698 32.8509L111.732 32.8184V28.9114L111.562 29.0416C110.917 29.4974 110.171 29.8881 109.424 30.116C108.643 30.3765 107.931 30.5067 107.32 30.5067C105.555 30.5067 104.163 30.0184 103.179 28.9439C102.161 27.9021 101.652 26.4695 101.652 24.6788C101.652 22.823 102.161 21.3579 103.213 20.2835C104.265 19.2091 105.657 18.6556 107.354 18.6556C108.779 18.6556 110.238 19.1114 111.562 20.023L111.732 20.1532V16.0184L111.698 15.9858C111.121 15.7579 110.476 15.4974 109.594 15.3346ZM124.154 15.2044C123.068 15.2044 122.05 15.53 121.167 16.2137C120.421 16.7998 119.911 17.6463 119.47 18.6556H119.436V15.4974H115.024V33.5346H119.436V24.3207C119.436 22.7579 119.776 21.4556 120.522 20.5114C121.269 19.5346 122.219 19.0463 123.373 19.0463C123.781 19.0463 124.188 19.1439 124.697 19.2091C125.172 19.3393 125.512 19.4695 125.749 19.6323L125.919 19.7625V15.53L125.817 15.4974C125.512 15.3021 124.901 15.2044 124.154 15.2044ZM136.169 15.1067C133.08 15.1067 130.603 15.9858 128.872 17.7114C127.107 19.437 126.258 21.8137 126.258 24.8091C126.258 27.6091 127.141 29.8881 128.838 31.5486C130.535 33.1765 132.843 34.023 135.728 34.023C138.748 34.023 141.158 33.1439 142.889 31.3858C144.654 29.6277 145.503 27.2835 145.503 24.3858C145.503 21.5207 144.688 19.2416 143.025 17.5812C141.43 15.9207 139.088 15.1067 136.169 15.1067ZM139.699 28.9765C138.884 29.9858 137.594 30.4742 135.999 30.4742C134.404 30.4742 133.114 29.9858 132.198 28.9114C131.282 27.9021 130.84 26.437 130.84 24.5812C130.84 22.6602 131.315 21.1951 132.198 20.1532C133.114 19.1114 134.37 18.5905 135.965 18.5905C137.527 18.5905 138.748 19.0788 139.631 20.0881C140.513 21.0974 140.988 22.5625 140.988 24.4835C140.921 26.437 140.547 27.9672 139.699 28.9765ZM155.345 22.9858C153.954 22.4323 153.071 22.0091 152.664 21.6509C152.325 21.3253 152.155 20.8695 152.155 20.2835C152.155 19.7951 152.359 19.3067 152.868 18.9812C153.377 18.6556 153.954 18.4928 154.802 18.4928C155.549 18.4928 156.33 18.623 157.076 18.8184C157.823 19.0137 158.502 19.3067 159.045 19.6974L159.214 19.8277V15.8556L159.113 15.823C158.604 15.6277 157.925 15.4323 157.11 15.2695C156.296 15.1393 155.549 15.0742 154.938 15.0742C152.834 15.0742 151.103 15.5625 149.745 16.637C148.387 17.6463 147.743 19.0137 147.743 20.6091C147.743 21.4556 147.878 22.2044 148.184 22.823C148.489 23.4416 148.931 24.0277 149.541 24.516C150.152 24.9719 151.035 25.4928 152.257 25.9812C153.275 26.4044 154.056 26.73 154.531 26.9905C155.006 27.2509 155.311 27.5439 155.549 27.7719C155.719 28.0323 155.82 28.3579 155.82 28.7812C155.82 29.9858 154.87 30.5719 152.936 30.5719C152.189 30.5719 151.408 30.4416 150.492 30.1486C149.575 29.8556 148.727 29.4323 148.014 28.9439L147.844 28.8137V32.9486L147.946 32.9812C148.591 33.2742 149.372 33.4695 150.322 33.6974C151.272 33.8602 152.121 33.9905 152.868 33.9905C155.142 33.9905 157.008 33.5021 158.332 32.4277C159.69 31.3858 160.402 30.0509 160.402 28.3253C160.402 27.1207 160.063 26.0463 159.316 25.2323C158.332 24.4509 157.11 23.637 155.345 22.9858ZM172.044 15.1067C168.955 15.1067 166.478 15.9858 164.747 17.7114C163.016 19.437 162.133 21.8137 162.133 24.8091C162.133 27.6091 163.016 29.8881 164.713 31.5486C166.41 33.1765 168.718 34.023 171.603 34.023C174.623 34.023 177.033 33.1439 178.764 31.3858C180.529 29.6277 181.378 27.2835 181.378 24.3858C181.378 21.5207 180.563 19.2416 178.9 17.5812C177.305 15.9207 174.963 15.1067 172.044 15.1067ZM175.54 28.9765C174.725 29.9858 173.436 30.4742 171.84 30.4742C170.211 30.4742 168.955 29.9858 168.039 28.9114C167.123 27.9021 166.681 26.437 166.681 24.5812C166.681 22.6602 167.157 21.1951 168.039 20.1532C168.955 19.1114 170.211 18.5905 171.806 18.5905C173.334 18.5905 174.589 19.0788 175.472 20.0881C176.354 21.0974 176.83 22.5625 176.83 24.4835C176.83 26.437 176.388 27.9672 175.54 28.9765ZM204.966 18.9812V15.4974H200.52V10.1579L200.384 10.1905L196.176 11.3951L196.074 11.4277V15.4974H189.421V13.2184C189.421 12.1765 189.693 11.3625 190.168 10.8416C190.643 10.3207 191.356 10.0602 192.239 10.0602C192.849 10.0602 193.494 10.1905 194.207 10.4835L194.377 10.5812V6.90208L194.275 6.86953C193.664 6.67418 192.849 6.54395 191.797 6.54395C190.474 6.54395 189.32 6.83697 188.267 7.32534C187.215 7.87883 186.435 8.62767 185.858 9.63697C185.281 10.6137 184.975 11.7207 184.975 12.9905V15.4974H181.887V18.9486H184.975V33.5346H189.421V18.9812H196.074V28.2602C196.074 32.0695 197.94 33.9905 201.674 33.9905C202.285 33.9905 202.93 33.8928 203.541 33.7951C204.186 33.6649 204.661 33.5021 204.932 33.3719L204.966 33.3393V29.8556L204.796 29.9858C204.525 30.1486 204.287 30.2788 203.88 30.3765C203.541 30.4742 203.235 30.5067 202.998 30.5067C202.115 30.5067 201.504 30.3114 201.063 29.823C200.656 29.3672 200.452 28.6184 200.452 27.5114V18.9812H204.966Z" fill="white" />
                  <path d="M0 0H20.8055V19.9581H0V0Z" fill="white" />
                  <path d="M22.9777 0H43.7832V19.9581H22.9777V0Z" fill="white" />
                  <path d="M0 22.042H20.8055V42.0001H0V22.042Z" fill="white" />
                  <path d="M22.9777 22.042H43.7832V42.0001H22.9777V22.042Z" fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0">
                    <rect width="205" height="42" fill="white" />
                  </clipPath>
                </defs>
              </svg>
              <div className='title'>Product Designer</div>
              <div className='subtitle'>Windows</div>
              <div className='timeline'>Jul 2018 - Jan 2020</div>
            </div>
          </div>
        </Carousel>
      <Container>
        <h1 hidden>Welcome to {site.title}</h1>
        
        {projectNodes && (
          <ProjectPreviewGrid
            title='Latest'
            nodes={projectNodes}
            browseMoreHref='/archive/'
          />
        )}
      </Container>
    </Layout>
  )
}

export default IndexPage
